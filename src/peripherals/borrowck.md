## Изменяемое глобальное состояние

К сожалению, аппаратное обеспечение — это, по сути, не что иное, как изменяемое глобальное состояние, что может пугать разработчика на Rust. Аппаратное обеспечение существует независимо от структур кода, который мы пишем, и может быть изменено в любой момент реальным миром.

## Какими должны быть наши правила?

Как мы можем надежно взаимодействовать с этими периферийными устройствами?

1. Всегда используйте методы `volatile` для чтения или записи в память периферийных устройств, так как она может измениться в любой момент.
2. В программном обеспечении мы должны иметь возможность предоставлять любое количество доступов только для чтения к этим периферийным устройствам.
3. Если программное обеспечение должно иметь доступ на чтение и запись к периферийному устройству, оно должно быть единственным обладателем ссылки на это устройство.

## Проверяющий заимствования

Последние два правила подозрительно похожи на то, что уже делает проверяющий заимствования (Borrow Checker)!

Представьте, если бы мы могли передавать владение этими периферийными устройствами или предоставлять неизменяемые или изменяемые ссылки на них?

Мы можем это сделать, но для проверяющего заимствования нам нужно иметь ровно один экземпляр каждого периферийного устройства, чтобы Rust мог корректно это обработать. К счастью, в аппаратном обеспечении есть только один экземпляр любого данного периферийного устройства, но как мы можем отразить это в структуре нашего кода?
